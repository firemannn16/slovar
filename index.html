<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Арабско-русский словарь</title>
<style>
  body { font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; background:#f3f4f6; margin:0; padding:24px; color:#0f172a }
  .container { max-width:900px; margin:0 auto; background:#fff; padding:20px; border-radius:12px; box-shadow:0 8px 30px rgba(2,6,23,0.08) }
  h1 { margin:0 0 8px 0; font-size:20px }
  p.lead { margin:0 0 16px 0; color:#475569; font-size:13px }
  input[type="search"] { width:100%; padding:10px 12px; border-radius:8px; border:1px solid #e2e8f0; font-size:16px; box-sizing:border-box }
  .count { color:#64748b; font-size:13px; margin-top:12px; text-align:right }
  ul.results { list-style:none; padding:0; margin:12px 0 0 0; display:grid; gap:8px }
  li.item { padding:12px; border-radius:10px; border:1px solid #e6eef8; background:#fbfdff; cursor:pointer; display:flex; justify-content:space-between; align-items:center }
  li.item:hover { box-shadow:0 6px 18px rgba(2,6,23,0.06) }
  .ru { font-weight:600 }
  .ar { margin-top:6px; font-size:18px; direction:rtl; text-align:right }
  .modal { position:fixed; inset:0; display:flex; align-items:center; justify-content:center; background:rgba(2,6,23,0.5) }
  .card { background:#fff; padding:18px; border-radius:10px; max-width:720px; width:94% }
  .note { color:#475569; margin-top:8px; font-size:13px }
  .muted { color:#94a3b8; font-size:12px; margin-top:14px }
  button { padding:8px 12px; border-radius:8px; border:1px solid #cbd5e1; background:#fff; cursor:pointer }
</style>
</head>
<body>
  <div class="container">
    <h1>Арабско-русский словарь</h1>
    <p class="lead">Поиск по арабскому и по-русски. Нажмите на результат, чтобы открыть подробности.</p>

    <input id="q" type="search" placeholder="Введите арабское (مثال: بَيْت или بيت) или русское (дом)..." />

    <div class="count" id="count">Найдено: 0</div>

    <ul class="results" id="results"></ul>

    <div class="muted"></div>
  </div>

  <div id="modal" style="display:none"></div>

<script>
/* ===== utils ===== */
function removeArabicDiacritics(text) {
  if (!text) return "";
  return text.replace(/[\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06ED]/g, "");
}
function normalizeArabic(text) {
  if (!text) return "";
  let t = text.trim();
  t = removeArabicDiacritics(t);
  t = t.replace(/[\u0622\u0623\u0625]/g, "\u0627");
  t = t.replace(/\u0649/g, "\u064A");
  t = t.replace(/[\u0624\u0626]/g, "\u0621");
  t = t.replace(/\u0640/g, "");
  return t;
}
function normalizeRussian(text) {
  if (!text) return "";
  return text.toLowerCase().trim();
}
function isCyrillic(q) {
  return /[\u0400-\u04FF]/.test(q);
}
function escapeHtml(s) {
  if (!s) return "";
  return s.replaceAll("&", "&amp;").replaceAll("<", "&lt;").replaceAll(">", "&gt;");
}

/* ===== parser ===== */
function parseWordText(txt) {
  const lines = txt.spl
